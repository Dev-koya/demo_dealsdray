<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Employee List</title>
    <style>
        .sort-icon {
            cursor: pointer;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
    <a class="navbar-brand" href="index.html">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-display" viewBox="0 0 16 16">
            <path d="M0 4s0-2 2-2h12s2 0 2 2v6s0 2-2 2h-4q0 1 .25 1.5H11a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1h.75Q6 13 6 12H2s-2 0-2-2zm1.398-.855a.76.76 0 0 0-.254.302A1.5 1.5 0 0 0 1 4.01V10c0 .325.078.502.145.602q.105.156.302.254a1.5 1.5 0 0 0 .538.143L2.01 11H14c.325 0 .502-.078.602-.145a.76.76 0 0 0 .254-.302 1.5 1.5 0 0 0 .143-.538L15 9.99V4c0-.325-.078-.502-.145-.602a.76.76 0 0 0-.302-.254A1.5 1.5 0 0 0 13.99 3H2c-.325 0-.502.078-.602.145" />
        </svg>
        DealsDray
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav ml-auto">
            <a class="nav-link" href="user.html">Home</a>
            <a class="nav-link" href="employee.html">Create Employee</a>
            <a class="nav-link" href="employeelist.html">Employee List</a>
            <a class="nav-link" href="index.html">Logout</a>
        </div>
    </div>
</nav>
<div class="container mt-5">
    <h2>Employee List</h2>
    <div class="d-flex justify-content-between align-items-center">
        <span>Total Count: <strong id="employeeCount"></strong></span>
        <a href="employee.html" class="btn btn-success ml-3">Create Employee</a>
    </div>
    <div class="table-responsive mt-3">
        <table class="table table-bordered table-hover">
            <thead class="thead-light">
                <tr>
                    <th>Unique ID <span class="sort-icon" data-sort="id">&#9650;&#9660;</span></th>
                    <th>Image</th>
                    <th>Name <span class="sort-icon" data-sort="name">&#9650;&#9660;</span></th>
                    <th>Email <span class="sort-icon" data-sort="email">&#9650;&#9660;</span></th>
                    <th>Mobile No</th>
                    <th>Designation</th>
                    <th>Gender</th>
                    <th>Course</th>
                    <th>Create Date <span class="sort-icon" data-sort="date">&#9650;&#9660;</span></th>
                    <th>Action</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="employeeTableBody">
                <tr>
                    <td>1</td>
                    <td><img src="default.jpg" alt="employee-image" width="50"></td>
                    <td>Hukum Gupta</td>
                    <td>hcgupta@cstech.in</td>
                    <td>954010044</td>
                    <td>HR</td>
                    <td>Male</td>
                    <td>MCA</td>
                    <td>13-Feb-21</td>
                    <td>
                        <a href="updateemployee.html?id=1" class="btn btn-primary btn-sm">Edit</a>
                        <button class="btn btn-danger btn-sm deleteBtn">Delete</button>
                    
                    
                    </td>
                    <td><button class="btn btn-warning btn-sm toggleStatus">Deactivate</button></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this employee?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" id="confirmDelete" class="btn btn-danger">Yes, Delete</button>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.2.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
$(document).ready(function() {
    var deleteRow;
    var sortOrder = {};
    function loadEmployees() {
        var employees = JSON.parse(localStorage.getItem('employees')) || {};
        var employeeTableBody = $('#employeeTableBody');
        employeeTableBody.empty(); 
        Object.values(employees).forEach(function(employee) {
            var row = '<tr>' +
                '<td>' + employee.id + '</td>' +
                '<td><img src="' + employee.image + '" alt="employee-image" width="50"></td>' +
                '<td>' + employee.name + '</td>' +
                '<td>' + employee.email + '</td>' +
                '<td>' + employee.mobile + '</td>' +
                '<td>' + employee.designation + '</td>' +
                '<td>' + employee.gender + '</td>' +
                '<td>' + employee.course.join(', ') + '</td>' +
                '<td>' + new Date().toLocaleDateString() + '</td>' + 
                '<td>' +
                '<a href="updateemployee.html?id=' + employee.id + '" class="btn btn-primary btn-sm">Edit</a>' +
                '<button class="btn btn-danger btn-sm deleteBtn">Delete</button>' +
                '</td>' +
                '<td><button class="btn btn-warning btn-sm toggleStatus">Deactivate</button></td>' +
                '</tr>';
            employeeTableBody.append(row);
        });
        
        updateEmployeeCount();
    }
    $('#employeeTableBody').on('click', '.deleteBtn', function() {
        deleteRow = $(this).closest('tr');
        $('#deleteModal').modal('show');
    });
    $('#confirmDelete').on('click', function() {
        var employeeId = deleteRow.find('td:first').text();
        var employees = JSON.parse(localStorage.getItem('employees')) || {};
        delete employees[employeeId];
        localStorage.setItem('employees', JSON.stringify(employees));

        deleteRow.remove(); 
        $('#deleteModal').modal('hide'); 
        updateEmployeeCount(); 
    });

    function updateEmployeeCount() {
        var uniqueIds = [];
        $('#employeeTableBody tr').each(function() {
            var id = $(this).find('td:first').text(); 
            if (uniqueIds.indexOf(id) === -1 && id !== "") {
                uniqueIds.push(id);
            }
        });
        $('#employeeCount').text(uniqueIds.length);
    }
    function sortTable(column, order) {
        var rows = $('#employeeTableBody tr').get();
        rows.sort(function(a, b) {
            var A = $(a).children('td').eq(column).text().toUpperCase();
            var B = $(b).children('td').eq(column).text().toUpperCase();
            if (A < B) {
                return order === 'asc' ? -1 : 1;
            }
            if (A > B) {
                return order === 'asc' ? 1 : -1;
            }
            return 0;
        });

        $.each(rows, function(index, row) {
            $('#employeeTableBody').append(row);
        });
    }
    $('.sort-icon').on('click', function() {
        var column = $(this).data('sort');
        var columnIndex = $(this).closest('th').index();
        var order = sortOrder[column] === 'asc' ? 'desc' : 'asc';
        sortOrder[column] = order;
        sortTable(columnIndex, order);
    });
    loadEmployees();
});
</script>


</body>
</html>
